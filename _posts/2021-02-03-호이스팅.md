--- 
layout: post 
title: 호이스팅
subtitle: 호이스팅 
tags: [기술, 회사] 
comments: true 
--- 

## 호이스팅이란
'어느 위치에서 선언되었던 간에 이를 함수 유효 범위 내에서 최상단으로 끌어올려 선언시키게 만드는 것' 이라 한다.


## 더 자세히 들어가보면
코드 작성 시 선언 이전에 참조나 할당을 하는 순서로 작성하더라도, 유효 범위 내에서 이 선언이 가장 먼저 되도록 해주는 것이라고 한다.  
즉, 선언과 할당을 한 라인에서 해 줄 경우에는 선언 부분만 호이스팅이 되고 할당은 원래의 코드 순서를 따라간다고 한다.  
그리고 함수 속에서 선언된 함수 범위의 변수는 해당 함수의 최상단으로, 전역 변수로 선언되었을 경우에는 해당 스크립트 단위의 최상단으로 끌어올려진다고 한다.  


#### 물리적으로 작성한 코드의 최상단으로 옮겨지는 것은 **절대** 아니다! 
자바스크립트 파서 내부에서 처리될 때 끌어올려지는 것 뿐이라고 한다.  
컴파일 단계에서 저장되는 메모리에는 코드 상에서의 위치와 정확히 일치한 곳에 있다고 한다.



## 선언 별 호이스팅 적용 여부
우선 간단하게 보여주자면 다음과 같다.  

| 종류 | 호이스팅 여부 |
| :------ |:--- |
| var 선언 | O |
| let, const 선언 | X |
| 함수 선언식 | O(함수 할당까지) |
| 함수 표현식 | O(var 선언부만) |  

![Crepe](/assets/img/hoisting/1.png)  
우선 var 선언의 경우에는 선언 부분만 위로 끌어올려지고, 할당 부분은 원래의 코드 순서를 따라가게 된다.  
첫째 줄에선 7번째 줄의 선언 부분만 호이스팅이 된 상태여서 undefined라는 값이 나오게 된다.
이후 세번째 줄에서 a에 7이 할당되고, 일곱번째 줄에서는 할당 부분만 작동하여 10이 할당되게 된다.


![Crepe](/assets/img/hoisting/2.png)  
let과 const 선언의 경우에는 호이스팅의 영향을 받지 않는다.  
선언부 이전에 접근하려고 하자 선언 전이라는 에러가 나오게 된다.


![Crepe](/assets/img/hoisting/3.png)  
함수 선언식의 경우에는 자바스크립트 파서가 해당 함수의 이름과 같은 변수에 함수를 자동으로 할당시키는 방식으로 동작한다고 한다.  
이 과정에서 호이스팅으로 인해 유효범위의 상단부로 끌어올려져 선언되고, 이때 함수가 자동적으로 할당까지 되어 결과적으로는 유효범위 최상단에서 함수의 이름과 같은 변수에 함수가 할당된다.  


하지만 함수 표현식의 경우에는 변수의 선언과 변수에 함수를 할당하는 부분이 별개로 일어나게 된다. 즉, 호이스팅에 의해 끌어올려지는 부분은 변수를 선언하는 부분뿐이고, 해당 변수에 함수가 할당되는 부분은 코드상의 순서를 그대로 따라가게 된다.  






